function prBase(){this.t=PR_N;this.x=0;this.y=0;this.x2=0;this.y2=0;this.r=0;this.g=0;this.t1=0;this.t2=0}function prPage(e,t){this.cx=e;this.bg=t;this.cxw=e.canvas.width;this.cxh=e.canvas.height;this.objs=new Array;this.objs[0]=new prBase;this.objCount=1;this.itC=0;this.itG=0}const PR_N=0;const PR_P=1;const PR_L=2;const PR_C=3;const PR_T=4;const PR_S=5;const PR_A=6;const PR_E=2.5e-8;const PR_2P=6.28318530272959;const PR_ERROR=0;const PR_GIVEN=1;const PR_LINE=2;const PR_CIRCLE=3;const PR_PARA=4;const PR_FIRST=5;const PR_SECOND=6;const PR_CLOSEST=7;const PR_SEGMENT=8;const PR_ARC=9;const PR_OUTPUT=10;const PR_INPUT=11;const PR_PAUSE=12;const PR_GROUP=13;const PR_EOL=14;const PR_MACHINE=15;const PR_END=16;const PR_CMD_COUNT=17;prBase.prototype.cp=function(e){this.t=e.t;this.x=e.x;this.y=e.y;this.x2=e.x2;this.y2=e.y2;this.r=e.r;this.g=e.g;this.t1=e.t1;this.t2=e.t2};prBase.prototype.cl=function(){this.t=PR_N;this.x=0;this.y=0;this.x2=0;this.y2=0;this.r=0;this.g=0;this.t1=0;this.t2=0};prBase.prototype.ec=function(e){var t=e+"t:"+this.t+" x:"+this.x+" y:"+this.y+"  x2:"+this.x2+" y2:"+this.y2+"    r:"+this.r;console.log(t)};prBase.prototype.tr=function(e){var t,n,r,i;switch(this.t){case PR_P:e.moveTo(this.x+3,this.y);e.arc(this.x,this.y,3,0,6.28);break;case PR_L:e.moveTo(this.x-200*this.x2,this.y-200*this.y2);e.lineTo(this.x+200*this.x2,this.y+200*this.y2);break;case PR_C:e.moveTo(this.x+this.r,this.y);e.arc(this.x,this.y,this.r,0,PR_2P);break;case PR_S:e.moveTo(this.x+this.x2*this.t1,this.y+this.y2*this.t1);e.lineTo(this.x+this.x2*this.t2,this.y+this.y2*this.t2);break;case PR_A:t=Math.cos(this.t1*-PR_2P);n=Math.sin(this.t1*-PR_2P);r=this.x+this.x2*t-this.y2*n;i=this.y+this.y2*t+this.x2*n;e.moveTo(r,i);e.arc(this.x,this.y,this.r,this.t1*PR_2P,this.t2*PR_2P);break}};prBase.prototype.isaP=function(){var e=0;if(this.t==PR_P){e=1}return e};prBase.prototype.eqP=function(e){var t,n,r;var i=0;t=this.x-e.x;n=this.y-e.y;r=t*t+n*n;if(r<PR_E){i=1}return i};prBase.prototype.saP=function(e,t){this.t=PR_P;this.x=e;this.y=t};prBase.prototype.saL=function(e,t,n,r){var i,s;this.x=e;this.y=t;i=n-e;s=r-t;this.x2=i;this.y2=s;this.r=Math.sqrt(i*i+s*s);if(this.r<PR_E){this.t=PR_P}else{this.t=PR_L}};prBase.prototype.saC=function(e,t,n,r){this.t=PR_C;this.x=e;this.y=t;this.x2=n-this.x;this.y2=r-this.y;this.r=Math.sqrt(this.x2*this.x2+this.y2*this.y2);if(this.r<PR_E){this.t=PR_P}};prBase.prototype.saS=function(e,t,n){this.copy(e);this.t=PR_S;this.t1=t;this.t2=n};prBase.prototype.saA=function(e,t,n){this.copy(e);this.t=PR_A;this.t1=t;this.t2=n};prBase.prototype.closer=function(e,t,n){var r,i,s,o,u,a,f;var l=1;r=e.isaP();i=t.isaP();s=n.isaP();if(s==0||r==0&&i==0){l=0}else{if(r==1&&i==0){l=1}else if(r==0&&i==1){l=2}else{o=e.x-n.x;u=e.y-n.y;a=Math.sqrt(o*o+u*u);o=t.x-n.x;u=t.y-n.y;f=Math.sqrt(o*o+u*u);o=(a-f)*(a-f);if(o>PR_E){if(a<f){l=1}else{l=2}}else{u=e.y-t.y;if(u*u>PR_E){if(e.y<t.y){l=1}else{l=2}}else{o=e.x-t.x;if(o*o>PR_E){if(e.x<t.x){l=1}else{l=2}}else{l=1}}}}}return l};prBase.prototype.iLL=function(e,t){var n,r,i,s,o,u,a,f,l;var c=[0,0,0,0,0,0,0,0,0,0];l=0;n=this.x;r=this.x+this.x2;o=this.y;u=this.y+this.y2;i=e.x;s=e.x+e.x2;a=e.y;f=e.y+e.y2;c[0]=n*u-r*o;c[1]=i*f-s*a;c[2]=n-r;c[3]=n-r;c[4]=i-s;c[5]=o-u;c[6]=a-f;c[7]=c[3]*c[6]-c[4]*c[5];if(c[7]*c[7]>PR_E){c[8]=c[0]*c[4]-c[1]*c[3];c[9]=c[0]*c[6]-c[1]*c[5];t.t=PR_P;t.x=c[8]/c[7];t.y=c[9]/c[7];l=1}else{l=0}return l};prBase.prototype.iLC=function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p;var d=0;o=e.x-this.x;a=e.y-this.y;u=e.x+e.x2-this.x;f=e.y+e.y2-this.y;d=1;n=u-o;r=f-a;i=n*n+r*r;s=this.r*this.r;l=o*f-u*a;c=s*i-l*l;h=1;if(r<0){h=-1}p=r;if(p<0){p*=-1}if(c<0){d=0}else{if(c*c<PR_E){t.x=l*r/i;t.y=-1*l*n/i;d=1}else{t.x=(l*r+h*n*Math.sqrt(c))/i;t.y=(-1*l*n+p*Math.sqrt(c))/i;t.x2=(l*r-h*n*Math.sqrt(c))/i;t.y2=(-1*l*n-p*Math.sqrt(c))/i;t.x+=this.x;t.y+=this.y;t.x2+=this.x;t.y2+=this.y;d=2}}return d};prBase.prototype.iCC=function(e,t){var n,r,i,s,o,u,a,f,l;var c=0;i=this.r+e.r;n=this.x-e.x;r=this.y-e.y;s=Math.sqrt(n*n+r*r);if(s>PR_E){if(i<s){c=0}else{if((i-s)*(i-s)<PR_E){t.x=this.x+n*this.r/s;t.y=this.y+r*this.r/s;c=1}else{c=2;l=.5*s-this.r*this.r*.5/s+e.r*e.r*.5/s;f=s-l;a=Math.sqrt(this.r*this.r-f*f);n/=s;r/=s;o=-r;u=n;t.x=this.x-n*f+o*a;t.y=this.y-r*f+u*a;t.x2=this.x-n*f-o*a;t.y2=this.y-r*f-u*a}}}return c};prBase.prototype.intersect=function(e,t){var n=0;var r=this.t*10+e.t;switch(r){case PR_P*10+PR_P:break;case PR_P*10+PR_L:break;case PR_P*10+PR_C:break;case PR_L*10+PR_P:break;case PR_L*10+PR_L:n=this.iLL(e,t);break;case PR_L*10+PR_C:n=e.iLC(this,t);break;case PR_C*10+PR_P:break;case PR_C*10+PR_L:n=this.iLC(e,t);break;case PR_C*10+PR_C:n=this.iCC(e,t);break}if(n!=0){t.t=PR_P}return n};prBase.prototype.saFI=function(e,t,n){var r,i;var s=new prBase;var o=new prBase;r=e.intersect(t,s);switch(r){case 0:this.t=PR_N;break;case 1:this.saP(s.x,s.y);break;case 2:o.saP(s.x2,s.y2);i=this.closer(s,o,n);if(i==2){this.saP(o.x,o.y)}else{this.saP(s.x,s.y)}break}};prBase.prototype.saSI=function(e,t,n){var r,i;var s=new prBase;var o=new prBase;r=e.intersect(t,s);switch(r){case 0:case 1:this.t=PR_N;break;case 2:o.saP(s.x2,s.y2);i=this.closer(s,o,n);if(i==2){this.saP(s.x,s.y)}else{this.saP(o.x,o.y)}break}};prBase.prototype.saPP=function(e,t){this.t=PR_P;this.x=e.x;this.y=e.y};prBase.prototype.saPL=function(e,t){this.t=PR_P;this.x=e.x+e.x2*t;this.y=e.y+e.y2*t};prBase.prototype.saPC=function(e,t){this.t=PR_P;var n=Math.cos(t*-1*PR_2P);var r=Math.sin(t*-1*PR_2P);this.x=e.x+e.x2*n-e.y2*r;this.y=e.y+e.y2*n+e.x2*r};prBase.prototype.saPm=function(e,t){switch(e.t){case PR_P:this.saPP(e,t);break;case PR_L:this.saPL(e,t);break;case PR_C:this.saPC(e,t);break;case PR_S:this.saPL(e,this.p1+t*(this.p2-this.p1));break;case PR_A:this.saPC(e,this.p1+t*(this.p2-this.p1));break}};prBase.prototype.saPmO=function(e,t){this.saPm(e,t.t1)};prBase.prototype.scanLength=function(e){var t;var n=e/this.r;if(this.t==PR_A){n/=PR_2P}n*=this.t2-this.t1;return n};prBase.prototype.cpoL=function(e){var t,n;var r=0;if(this.r>PR_E){t=e.x-this.x;n=e.y-this.y;r=(t*this.x2+n*this.y2)/(this.r*this.r)}return r};prBase.prototype.cpoC=function(e){var t,n,r,i,s,o,u,a,f;var l=0;var t=e.x-this.x;var n=e.y-this.y;var r=Math.sqrt(t*t+n*n);if(r>PR_E){t/=r;n/=r;o=this.x2/this.r;u=this.y2/this.r;i=t*o+n*u;a=Math.acos(i);f=t*u-o*n;if(f<0){a=2*Math.PI-a}l=a/(Math.PI*2)}return l};prBase.prototype.cPP=function(e){var t=0;if(this.t!=PR_P){switch(this.t){case PR_L:t=this.cpoL(e);break;case PR_C:t=this.cpoC(e);break}}return t};prBase.prototype.saCPP=function(e,t){this.t=PR_T;this.t1=e.cPP(t)};prPage.prototype.copy=function(e){var t;this.cx=e.cx;this.bg=e.bg;this.cxw=e.cx.canvas.width;for(t=0;t<e.objCount;++t){this.objs[t]=new prBase;this.objs[t].cp(e.objs[t])}this.objCount=e.objCount;this.iteratorCounter=e.iteratorCounter;this.iteratorTag=e.iteratorTag};prPage.prototype.clear=function(){this.objCount=1;this.iteratorCounter=0;this.cxw=this.cx.canvas.width;this.cxh=this.cx.canvas.height;this.cx.fillStyle=this.bg;this.cx.beginPath();this.cx.rect(0,0,this.cxw,this.cxh);this.cx.fill()};prPage.prototype.merge=function(e){var t,n;n=this.objCount;for(t=0;t<e.objCount;++t){this.objs[n+t]=new prBase;this.objs[n+t].copy(e.objs[t])}this.objCount+=e.objCount};prPage.prototype.echo=function(){var e=0;for(e=0;e<this.objCount;++e){this.objs[e].ec(e+":")}};prPage.prototype.echoOne=function(e){var t=0;if(e>0&&e<this.objCount){this.objs[e].ec(e+":")}};prPage.prototype.trace=function(e,t){var n=0;for(n=0;n<this.objCount;++n){this.objs[n].tr(this.cx)}};prPage.prototype.traceOne=function(e,t,n){if(e>0&&e<this.objCount){this.objs[e].tr(this.cx)}};prPage.prototype.traceGroup=function(e){for(var t=0;t<this.objCount;++t){if(this.objs[t].g==e){this.objs[t].tr(this.cx)}}};prPage.prototype.setGroup=function(e,t){if(e>0&&e<this.objCount){this.objs[e].g=t}};prPage.prototype.startGroup=function(e){this.iteratorCounter=0;this.iteratorTag=e};prPage.prototype.nextGroupMember=function(){var e=this.iteratorCounter;while(e<this.objectCtr||this.objs[e].g!=this.iteratorTag){++e}this.iteratorCtr=e;if(e>=this.objectCtr){e=0}return e};prPage.prototype.clearGroup=function(e){for(var t=0;t<this.objCount;++t){if(this.objs[t].g==e){this.objs[t].cl()}}};prPage.prototype.isAPoint=function(e){var t=0;if(0<e&&e<this.objCount){if(e in this.objs){if(this.objs[e].t==PR_P){t=1}}}return t};prPage.prototype.addGivenPoint=function(e,t){this.objs[this.objCount]=new prBase;this.objs[this.objCount].saP(e*this.cxw,t*this.cxh);var n=this.objCount;++this.objCount;return n};prPage.prototype.given=prPage.prototype.addGivenPoint;prPage.prototype.addLine=function(e,t){var n=this.objCount;if(this.isAPoint(e)==0){n=0}if(this.isAPoint(t)==0){n=0}if(n==this.objCount){this.objs[n]=new prBase;this.objs[n].saL(this.objs[e].x,this.objs[e].y,this.objs[t].x,this.objs[t].y);++this.objCount}return n};prPage.prototype.line=prPage.prototype.addLine;prPage.prototype.addCircle=function(e,t){var n=this.objCount;if(this.isAPoint(e)==0){n=0}if(this.isAPoint(t)==0){n=0}if(n==this.objCount){this.objs[this.objCount]=new prBase;this.objs[this.objCount].saC(this.objs[e].x,this.objs[e].y,this.objs[t].x,this.objs[t].y);++this.objCount}return n};prPage.prototype.addSegment=function(e,t,n){var r=0;if(0<e&&e<this.objCount){if(e in this.objs){if(this.objs[e].t==PR_L){r==this.objCount;this.objs[r]=new prBase;this.objs[r].saS(this.objs[e],t,n);++this.objCount}}}return r};prPage.prototype.addArc=function(e,t,n){var r=0;if(0<e&&e<this.objCount){if(e in this.objs){if(this.objs[e].t==PR_C){r==this.objCount;this.objs[r]=new prBase;this.objs[r].saS(this.objs[e],t,n);++this.objCount}}}return r};prPage.prototype.addFirstIntersection=function(e,t,n){var r=0;this.objs[this.objCount]=new prBase;this.objs[this.objCount].saFI(this.objs[e],this.objs[t],this.objs[n]);if(this.objs[this.objCount].t!=PR_N){r=this.objCount;++this.objCount}return r};prPage.prototype.addSecondIntersection=function(e,t,n){var r=0;this.objs[this.objCount]=new prBase;this.objs[this.objCount].saSI(this.objs[e],this.objs[t],this.objs[n]);if(this.objs[this.objCount].t!=PR_N){r=this.objCount;++this.objCount}return r};prPage.prototype.addParametricPoint=function(e,t){var n=0;this.objs[this.objCount]=new prBase;this.objs[this.objCount].saPm(this.objs[e],t);if(this.objs[this.objCount].t!=PR_N){n=this.objCount;++this.objCount}return n};prPage.prototype.closestPointParam=function(e,t){return this.objs[e].cPP(this.objs[t])};prPage.prototype.getBase=function(e){return this.objs[e]};prPage.prototype.addInitialFigure=function(e,t,n,r){var i,s,o,u,a,f,l,c,h,p,d,v,m;var g,y,b,w,E,S,x,T,N;this.clear();i=this.addGivenPoint(e,t);s=this.addGivenPoint(e+n,t);o=this.addGivenPoint(e+r,t);S=this.addLine(i,s);d=this.addCircle(i,s);v=this.addCircle(i,o);u=this.addSecondIntersection(d,S,s);m=this.addCircle(u,s);g=this.addCircle(s,u);a=this.addSecondIntersection(m,g,i);x=this.addLine(i,a);f=this.addSecondIntersection(d,x,u);l=this.addFirstIntersection(v,x,f);y=this.addCircle(s,i);b=this.addCircle(f,i);c=this.addFirstIntersection(y,b,a);T=this.addLine(s,c);w=this.addCircle(o,i);E=this.addCircle(l,i);h=this.addSecondIntersection(w,E,i);N=this.addLine(l,h);p=this.addFirstIntersection(N,T,h)};prPage.prototype.loft=function(e,t,n){var r,i,s,o,u,a,f;a=new prBase;f=new prBase;f.copy(this.objs[e]);o=f.scanLength(n);a.saPm(f,f.t1);this.cx.moveTo(a.x,a.y);for(s=f.t1;s<f.t2;s+=o){a.saPm(f,s);this.cx.lineTo(a.x,a.y)}f.copy(this.theMarks[t]);o=f.scanLength(n);for(s=f.t1;s<f.t2;s+=o){a.saPm(f,s);this.cx.lineTo(a.x,a.y)}f.copy(this.objs[e]);a.saPm(f,f.t1);this.cx.lineTo(a.x,a.y)}